/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package GUI;

import grupp1.Database;
import grupp1.Person;
import java.awt.CardLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;
import java.sql.*;
import java.util.Calendar;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.Clip;
import javax.swing.*;

/**
 *
 * @author Nötfärs
 */
public class HemGUI extends javax.swing.JFrame {

    private Person inloggadPerson;

    public HemGUI(Person inloggadPerson) {
        initComponents();
        this.inloggadPerson = inloggadPerson;
        Calendar cal = Calendar.getInstance();
        lblDatum.setText("Startsida - Dagens datum är: " + cal.getTime().toString());
        uppdateraDatum();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        pnlMain = new javax.swing.JPanel();
        pnlMeny = new javax.swing.JPanel();
        btnHem = new javax.swing.JButton();
        btnProfil = new javax.swing.JButton();
        btnSkapaInlagg = new javax.swing.JButton();
        btnExit = new javax.swing.JButton();
        jButton3 = new javax.swing.JButton();
        jButton4 = new javax.swing.JButton();
        jButton5 = new javax.swing.JButton();
        mainInfoPnl = new javax.swing.JPanel();
        hemInfoPnl = new javax.swing.JPanel();
        utbStartPnl = new javax.swing.JPanel();
        jTextField1 = new javax.swing.JTextField();
        utbDiskuPnl = new javax.swing.JPanel();
        jTextField2 = new javax.swing.JTextField();
        lblDatum = new javax.swing.JLabel();
        mainDirPnl = new javax.swing.JPanel();
        hemDirPnl = new javax.swing.JPanel();
        utbDirPnl = new javax.swing.JPanel();
        utbStartBtn = new javax.swing.JButton();
        utbDiskuBtn = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setResizable(false);

        pnlMain.setBackground(new java.awt.Color(255, 255, 255));

        btnHem.setBackground(new java.awt.Color(255, 255, 255));
        btnHem.setText("Hem");

        btnProfil.setBackground(new java.awt.Color(255, 255, 255));
        btnProfil.setText("Profil");
        btnProfil.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnProfilActionPerformed(evt);
            }
        });

        btnSkapaInlagg.setBackground(new java.awt.Color(255, 255, 255));
        btnSkapaInlagg.setText("Skapa inlägg");
        btnSkapaInlagg.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSkapaInlaggActionPerformed(evt);
            }
        });

        btnExit.setBackground(new java.awt.Color(255, 255, 255));
        btnExit.setText("Logga ut");
        btnExit.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnExitActionPerformed(evt);
            }
        });

        jButton3.setBackground(new java.awt.Color(255, 255, 255));
        jButton3.setText("Utbildning");
        jButton3.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton3ActionPerformed(evt);
            }
        });

        jButton4.setBackground(new java.awt.Color(255, 255, 255));
        jButton4.setText("Forskning");

        jButton5.setBackground(new java.awt.Color(255, 255, 255));
        jButton5.setText("Kalender");
        jButton5.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton5ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout pnlMenyLayout = new javax.swing.GroupLayout(pnlMeny);
        pnlMeny.setLayout(pnlMenyLayout);
        pnlMenyLayout.setHorizontalGroup(
            pnlMenyLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlMenyLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(btnHem, javax.swing.GroupLayout.PREFERRED_SIZE, 93, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(4, 4, 4)
                .addComponent(jButton3, javax.swing.GroupLayout.PREFERRED_SIZE, 93, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jButton4, javax.swing.GroupLayout.PREFERRED_SIZE, 93, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jButton5, javax.swing.GroupLayout.PREFERRED_SIZE, 93, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(btnProfil, javax.swing.GroupLayout.PREFERRED_SIZE, 93, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(btnSkapaInlagg)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(btnExit, javax.swing.GroupLayout.PREFERRED_SIZE, 93, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(24, 24, 24))
        );
        pnlMenyLayout.setVerticalGroup(
            pnlMenyLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, pnlMenyLayout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(pnlMenyLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnProfil)
                    .addComponent(btnHem)
                    .addComponent(btnSkapaInlagg)
                    .addComponent(btnExit)
                    .addComponent(jButton3)
                    .addComponent(jButton4)
                    .addComponent(jButton5))
                .addContainerGap())
        );

        mainInfoPnl.setLayout(new java.awt.CardLayout());

        hemInfoPnl.setBackground(new java.awt.Color(255, 255, 255));

        javax.swing.GroupLayout hemInfoPnlLayout = new javax.swing.GroupLayout(hemInfoPnl);
        hemInfoPnl.setLayout(hemInfoPnlLayout);
        hemInfoPnlLayout.setHorizontalGroup(
            hemInfoPnlLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 684, Short.MAX_VALUE)
        );
        hemInfoPnlLayout.setVerticalGroup(
            hemInfoPnlLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 372, Short.MAX_VALUE)
        );

        mainInfoPnl.add(hemInfoPnl, "mainHemCard");

        utbStartPnl.setBackground(new java.awt.Color(255, 255, 255));

        jTextField1.setText("Utbildning startsida");

        javax.swing.GroupLayout utbStartPnlLayout = new javax.swing.GroupLayout(utbStartPnl);
        utbStartPnl.setLayout(utbStartPnlLayout);
        utbStartPnlLayout.setHorizontalGroup(
            utbStartPnlLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(utbStartPnlLayout.createSequentialGroup()
                .addGap(250, 250, 250)
                .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, 128, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(306, Short.MAX_VALUE))
        );
        utbStartPnlLayout.setVerticalGroup(
            utbStartPnlLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(utbStartPnlLayout.createSequentialGroup()
                .addGap(160, 160, 160)
                .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(192, Short.MAX_VALUE))
        );

        mainInfoPnl.add(utbStartPnl, "mainUtbCard");

        utbDiskuPnl.setBackground(new java.awt.Color(255, 255, 255));

        jTextField2.setText("Diskussion sida");

        javax.swing.GroupLayout utbDiskuPnlLayout = new javax.swing.GroupLayout(utbDiskuPnl);
        utbDiskuPnl.setLayout(utbDiskuPnlLayout);
        utbDiskuPnlLayout.setHorizontalGroup(
            utbDiskuPnlLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(utbDiskuPnlLayout.createSequentialGroup()
                .addGap(258, 258, 258)
                .addComponent(jTextField2, javax.swing.GroupLayout.PREFERRED_SIZE, 88, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(338, Short.MAX_VALUE))
        );
        utbDiskuPnlLayout.setVerticalGroup(
            utbDiskuPnlLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(utbDiskuPnlLayout.createSequentialGroup()
                .addGap(164, 164, 164)
                .addComponent(jTextField2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(188, Short.MAX_VALUE))
        );

        mainInfoPnl.add(utbDiskuPnl, "diskUtbCard");
        mainInfoPnl.add(lblDatum, "card4");

        mainDirPnl.setBackground(new java.awt.Color(255, 255, 255));
        mainDirPnl.setLayout(new java.awt.CardLayout());

        hemDirPnl.setBackground(new java.awt.Color(255, 255, 255));

        javax.swing.GroupLayout hemDirPnlLayout = new javax.swing.GroupLayout(hemDirPnl);
        hemDirPnl.setLayout(hemDirPnlLayout);
        hemDirPnlLayout.setHorizontalGroup(
            hemDirPnlLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 114, Short.MAX_VALUE)
        );
        hemDirPnlLayout.setVerticalGroup(
            hemDirPnlLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 372, Short.MAX_VALUE)
        );

        mainDirPnl.add(hemDirPnl, "dirHemCard");

        utbStartBtn.setBackground(new java.awt.Color(255, 255, 255));
        utbStartBtn.setText("Start");
        utbStartBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                utbStartBtnActionPerformed(evt);
            }
        });

        utbDiskuBtn.setBackground(new java.awt.Color(255, 255, 255));
        utbDiskuBtn.setText("Diskussion");
        utbDiskuBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                utbDiskuBtnActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout utbDirPnlLayout = new javax.swing.GroupLayout(utbDirPnl);
        utbDirPnl.setLayout(utbDirPnlLayout);
        utbDirPnlLayout.setHorizontalGroup(
            utbDirPnlLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(utbDirPnlLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(utbDirPnlLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(utbDiskuBtn, javax.swing.GroupLayout.PREFERRED_SIZE, 93, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(utbStartBtn, javax.swing.GroupLayout.PREFERRED_SIZE, 93, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(11, Short.MAX_VALUE))
        );
        utbDirPnlLayout.setVerticalGroup(
            utbDirPnlLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(utbDirPnlLayout.createSequentialGroup()
                .addGap(6, 6, 6)
                .addComponent(utbStartBtn)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(utbDiskuBtn)
                .addContainerGap(309, Short.MAX_VALUE))
        );

        mainDirPnl.add(utbDirPnl, "dirUtbCard");

        javax.swing.GroupLayout pnlMainLayout = new javax.swing.GroupLayout(pnlMain);
        pnlMain.setLayout(pnlMainLayout);
        pnlMainLayout.setHorizontalGroup(
            pnlMainLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlMainLayout.createSequentialGroup()
                .addComponent(mainDirPnl, javax.swing.GroupLayout.PREFERRED_SIZE, 114, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(mainInfoPnl, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGap(28, 28, 28))
            .addComponent(pnlMeny, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        pnlMainLayout.setVerticalGroup(
            pnlMainLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlMainLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(pnlMeny, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pnlMainLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(mainInfoPnl, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(mainDirPnl, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(pnlMain, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(pnlMain, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, Short.MAX_VALUE))
        );

        pack();
        setLocationRelativeTo(null);
    }// </editor-fold>//GEN-END:initComponents

    private void btnProfilActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnProfilActionPerformed

        ProfilGUI pGUI = new ProfilGUI(inloggadPerson);
        pGUI.setVisible(true);

//        try {
//            Connection con = Database.getDB();
//            Statement stmt = con.createStatement();
//            String sql = "SELECT * FROM namn";
//            ResultSet rs = stmt.executeQuery(sql);
//            String p = "";
//            
//            while (rs.next()) {
//                p = p + "ID: " + rs.getInt("ID") + " - Namn: " + rs.getString("fornamn") + " " + rs.getString("efternamn") + "\n";
//                jTextArea1.setText(p);
//            }
//        } catch (SQLException error) {
//            System.out.println(error.getMessage());
//        }
    }//GEN-LAST:event_btnProfilActionPerformed

    private void btnSkapaInlaggActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnSkapaInlaggActionPerformed
        InlaggGUI inlagg = new InlaggGUI(inloggadPerson);
        inlagg.setVisible(true);
    }//GEN-LAST:event_btnSkapaInlaggActionPerformed

    private void btnExitActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnExitActionPerformed
        LoginGUI login1 = new LoginGUI();
        login1.setVisible(true);
        login1.setLocationRelativeTo(null);
        dispose();
        try {
            File currentDirectory = new File("");
            String mp3 = currentDirectory.getAbsolutePath() + "\\login.wav";
            AudioInputStream audioIn = AudioSystem.getAudioInputStream(new File(mp3));
            Clip clip = AudioSystem.getClip();
            clip.open(audioIn);
            clip.start();
        } catch (Exception e) {
        }
    }//GEN-LAST:event_btnExitActionPerformed

    private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton3ActionPerformed
    changeCard(mainInfoPnl, "mainUtbCard");
    changeCard(mainDirPnl, "dirUtbCard");
    }//GEN-LAST:event_jButton3ActionPerformed

    private void utbStartBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_utbStartBtnActionPerformed
        changeCard(mainInfoPnl, "mainUtbCard");
    }//GEN-LAST:event_utbStartBtnActionPerformed

    private void utbDiskuBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_utbDiskuBtnActionPerformed
        changeCard(mainInfoPnl, "diskUtbCard");
    }//GEN-LAST:event_utbDiskuBtnActionPerformed

    private void jButton5ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton5ActionPerformed
        KalenderGUI kalender = new KalenderGUI();
        kalender.setVisible(true);
        
    }//GEN-LAST:event_jButton5ActionPerformed
    private void changeCard(JPanel rootpanel, String kort) {
        CardLayout card = (CardLayout) rootpanel.getLayout();
        card.show(rootpanel, kort);
    }
    
    public void uppdateraDatum() {
        ActionListener uppgift = new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                Calendar cal = Calendar.getInstance();
                lblDatum.setText("Visar: Startsida - Dagens datum är: " + cal.getTime().toString());

            }
        };
        new Timer(1000, uppgift).start();
    }

    public void setIngressText(int tick, JTextPane txtPanel, int tickDown) {
        int i = 0;
        int idKoll = 0;
        try {
            ResultSet id = Database.sqlSelect("SELECT MAX(INLAGGID) FROM INLAGG");
            if (id.next()) {
            idKoll = id.getInt(1) - tickDown;
            }
            ResultSet inlagg = Database.sqlSelect("SELECT * FROM INLAGG WHERE INLAGGID = " + idKoll);
            while (inlagg.next() && i < tick) {

                String rubrik = inlagg.getString("RUBRIK");
                String ingress = inlagg.getString("INGRESS");
                String datum = inlagg.getString("DATUM");
                txtPanel.setText(rubrik + "\n" + ingress + "\n" + datum);
                i++;
            }
        } catch (Exception e) {

        }
    }
    /**
     * @param args the command line arguments
     */

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnExit;
    private javax.swing.JButton btnHem;
    private javax.swing.JButton btnProfil;
    private javax.swing.JButton btnSkapaInlagg;
    private javax.swing.JPanel hemDirPnl;
    private javax.swing.JPanel hemInfoPnl;
    private javax.swing.JButton jButton3;
    private javax.swing.JButton jButton4;
    private javax.swing.JButton jButton5;
    private javax.swing.JTextField jTextField1;
    private javax.swing.JTextField jTextField2;
    private javax.swing.JLabel lblDatum;
    private javax.swing.JPanel mainDirPnl;
    private javax.swing.JPanel mainInfoPnl;
    private javax.swing.JPanel pnlMain;
    private javax.swing.JPanel pnlMeny;
    private javax.swing.JPanel utbDirPnl;
    private javax.swing.JButton utbDiskuBtn;
    private javax.swing.JPanel utbDiskuPnl;
    private javax.swing.JButton utbStartBtn;
    private javax.swing.JPanel utbStartPnl;
    // End of variables declaration//GEN-END:variables
}
